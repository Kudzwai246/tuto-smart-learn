// android/settings.gradle - root settings for the Android project
rootProject.name = "tuto-smart-learn"

// Always include your app module
include ':app'

// If you have a local capacitor-cordova-android-plugins directory in repo, include it
if (file('capacitor-cordova-android-plugins').exists()) {
    include ':capacitor-cordova-android-plugins'
    project(':capacitor-cordova-android-plugins').projectDir = new File('capacitor-cordova-android-plugins')
}

// Capacitor runtime mapping (node_modules)
def nodeModules = new File(rootDir, "../node_modules")
def nm = { path -> new File(nodeModules, path) }

if (nm("@capacitor/android/capacitor").exists() || nm("@capacitor/android").exists()) {
    include ':capacitor-android'
    project(':capacitor-android').projectDir = new File('../node_modules/@capacitor/android/capacitor')
}

// Helper function to add plugin if present
def includeIfExists = { name, relPaths ->
    for (p in relPaths) {
        def f = new File(rootDir, "../node_modules/@capacitor/${p}")
        if (f.exists()) {
            include ":${name}"
            project(":${name}").projectDir = f
            println "Included ${name} -> ${f}"
            return true
        }
    }
    return false
}

// Try to include common Capacitor plugins if present
includeIfExists('capacitor-app', ['app/android', 'app'])
includeIfExists('capacitor-haptics', ['haptics/android', 'haptics'])
includeIfExists('capacitor-keyboard', ['keyboard/android', 'keyboard'])
includeIfExists('capacitor-status-bar', ['status-bar/android', 'status-bar'])

// Add other plugin includes here if you install them later.
// e.g. includeIfExists('capacitor-camera', ['camera/android','camera'])
