// android/settings.gradle (replace with this content)
// Smart conditional includes for Capacitor plugin modules.
// This file will include plugin projects only if the target directory exists
// (so CI won't try to include non-existent paths and produce confusing errors).

// Always include the app module (expected to be in android/app)
include ':app'

// Capacitor helper plugin already present in your repo (if the folder exists)
if (file('capacitor-cordova-android-plugins').exists()) {
    include ':capacitor-cordova-android-plugins'
    project(':capacitor-cordova-android-plugins').projectDir = file('capacitor-cordova-android-plugins')
} else {
    println "capacitor-cordova-android-plugins not found in android/ (skipping)"
}

// Helper to include a project if any of the provided candidate paths exist.
def tryInclude = { String projName, List candidatePaths ->
    boolean included = false
    for (p in candidatePaths) {
        def f = file(p)
        if (f.exists()) {
            include ":${projName}"
            project(":${projName}").projectDir = f
            println "Included ${projName} -> ${p}"
            included = true
            break
        }
    }
    if (!included) {
        println "Skipping ${projName}: none of paths found: ${candidatePaths}"
    }
    return included
}

// Capacitor runtime (try the common locations)
tryInclude('capacitor-android', [
    '../node_modules/@capacitor/android/capacitor',
    '../node_modules/@capacitor/android'
])

// Capacitor plugin modules (common locations inside node_modules)
tryInclude('capacitor-app', [
    '../node_modules/@capacitor/app/android',
    '../node_modules/@capacitor/app'
])

tryInclude('capacitor-haptics', [
    '../node_modules/@capacitor/haptics/android',
    '../node_modules/@capacitor/haptics'
])

tryInclude('capacitor-keyboard', [
    '../node_modules/@capacitor/keyboard/android',
    '../node_modules/@capacitor/keyboard'
])

tryInclude('capacitor-status-bar', [
    '../node_modules/@capacitor/status-bar/android',
    '../node_modules/@capacitor/status-bar'
])

// Add other plugin includes here using tryInclude(...) if you add more Capacitor plugins.
// Example:
// tryInclude('capacitor-camera', ['../node_modules/@capacitor/camera/android', '../node_modules/@capacitor/camera'])
