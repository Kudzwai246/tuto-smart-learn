// android/settings.gradle - Simplified settings for stable builds
rootProject.name = "tuto-smart-learn"

// Always include your app module
include ':app'

// Include capacitor-cordova-android-plugins if present locally
if (file('capacitor-cordova-android-plugins').exists()) {
    include ':capacitor-cordova-android-plugins'
    project(':capacitor-cordova-android-plugins').projectDir = new File('capacitor-cordova-android-plugins')
}

// Simplified Capacitor Android inclusion - reduced logging for stability
def nodeModules = new File(rootDir, "../node_modules")

// Find and include Capacitor Android core
def capacitorAndroidPath = null
if (new File(nodeModules, "@capacitor/android/capacitor").exists()) {
    capacitorAndroidPath = new File('../node_modules/@capacitor/android/capacitor')
} else if (new File(nodeModules, "@capacitor/android").exists()) {
    capacitorAndroidPath = new File('../node_modules/@capacitor/android')
}

if (capacitorAndroidPath != null && capacitorAndroidPath.exists()) {
    include ':capacitor-android'
    project(':capacitor-android').projectDir = capacitorAndroidPath
}

// Simple helper function for plugin inclusion
def includeIfExists = { name, relPath ->
    def f = new File(rootDir, "../node_modules/@capacitor/${relPath}")
    if (f.exists()) {
        include ":${name}"
        project(":${name}").projectDir = f
        return true
    }
    return false
}

// Include common Capacitor plugins with simplified paths
includeIfExists('capacitor-app', 'app/android')
includeIfExists('capacitor-haptics', 'haptics/android')
includeIfExists('capacitor-keyboard', 'keyboard/android')
includeIfExists('capacitor-status-bar', 'status-bar/android')
